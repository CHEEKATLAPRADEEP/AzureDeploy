{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {},
  "variables": {},
  "resources": [
    {
      "name": "role001",
      "type": "Microsoft.Authorization/roleDefinitions",
      "apiVersion": "2015-07-01",
      "properties": {
        "principalId": "5ac84765-1c8c-4994-94b2-629461bd191b"
      }
    },
    {
      "name": "ra001",
      "type": "Microsoft.Authorization/roleAssignments",
      "apiVersion": "2015-07-01",
      "dependsOn": [
        "role001"
      ],
      "properties": {
        "roleDefinitionId": "[concat(subscription().id, 'providers/Microsoft.Authorization/roleDefinitions/role001')]",
        "principalId": "5ac84765-1c8c-4994-94b2-629461bd191b",
        "scope": "[subscription().id]"
      }
    },
    {
      "name": "MyTestRG",
      "type": "Microsoft.Resources/resourceGroups",
      "apiVersion": "2017-05-10",
      "location": "East US",
      "properties": {}
    },
    {
      "apiVersion": "2017-05-10",
      "name": "nestedDeployment",
      "type": "Microsoft.Resources/deployments",
      "resourceGroup": "MyTestRG",
      "dependsOn": [
        "MyTestRG"
      ],
      "properties": {
        "mode": "incremental",
        "parameters": {},
        "template": {
          "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
          "contentVersion": "1.0.0.0",
          "parameters": {},
          "variables": {},
          "resources": [
            {
                "type": "Microsoft.Storage/storageAccounts",
                "name": "knsubdepl",
                "apiVersion": "2016-01-01",
                "location": "East US",
                "sku": {
                    "name": "Standard_LRS"
                },
                "kind": "Storage",
                "properties": {}
            }
          ],
          "outputs": {}
        }
      }
    }
  ],
  "outputs": {}
} 
